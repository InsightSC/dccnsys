!function(t){const a=[{id:20,firstName:"Andrey",lastName:"Sidorov",affiliation:"Moscow State University",avatar:"../images/avatar_man.svg"},{id:21,firstName:"Ivan",lastName:"Petrov",affiliation:"Moscow Institute of Physics and Technology",avatar:"../images/avatar_man.svg"},{id:22,firstName:"Kate",lastName:"Petrova",affiliation:"Institute of Control Sciences",avatar:"../images/avatar_woman.svg"},{id:23,firstName:"Maria",lastName:"Ivanova",affiliation:"Tomsk State University",avatar:"../images/avatar_woman.svg"},{id:24,firstName:"Svetlana",lastName:"Sidorova",affiliation:"Ekaterinburg Politechnic Institute",avatar:"../images/avatar_woman.svg"}];t.fn.authorSearch=function(e){const i=this.find(".dccn-authors-search-content"),n=this.find(".dccn-action-show"),o=this.find(".dccn-action-hide"),r=this.find('input[type="search"]'),s=this.find(".dccn-authors-search-preview"),c=s.find(".dccn-placeholder"),l=s.find(".dccn-content"),d=this.find(".dccn-hidden-form"),u=this.attr("data-source"),f=t.extend({query:()=>""===u.trim()?new Promise((t,e)=>{const i=r.val().toLowerCase();setTimeout(()=>{t(a.filter(t=>t.firstName.toLowerCase().includes(i)||t.lastName.toLowerCase().includes(i)||t.affiliation.toLowerCase().includes(i)||String(t.id).includes(i)))},500)}):t.get({url:u,data:t(".dccn-authors-search-form").serialize()})},e),h=()=>{i.toggleClass("active"),n.toggleClass("d-none")},m=t=>{t.hasClass("active")||(l.toggleClass("active"),c.toggleClass("active"))},g=t=>{Swal.fire({showCancelButton:!0,showCloseButton:!0,buttonsStyling:!1,allowOutsideClick:!1,confirmButtonText:"Add author",customClass:{confirmButton:"btn btn-success btn-lg mr-1",cancelButton:"btn btn-outline-secondary btn-lg"},animation:!1,title:"Confirm add author",html:`\n<div class="dccn-authors-search-modal-item" data-user--id="${t.id}">\n  <img src="${t.avatar}">\n  <div>\n    <h4 class="dccn-text-large-light">\n      ${t.firstName} ${t.lastName}\n    </h4>\n    <p class="dccn-text-0-light text-muted">\n      ${t.affiliation}\n    </p>\n  </div>\n</div>`}).then(a=>{a.value&&(t=>{d.find('input[type="hidden"]').val(String(t.id)),console.log("Going to POST: ",d.serialize())})(t)})},v=()=>{const a=r.val().trim().toLowerCase();console.log(a),""===a?m(c):f.query().then(a=>{const e=a.map(t=>`\n  <div class="dccn-authors-search-item" \n      data-user--id="${t.id}" \n      data-user--first-name="${t.firstName}" \n      data-user--last-name="${t.lastName}" \n      data-user--avatar="${t.avatar}" \n      data-user--affiliation="${t.affiliation}">\n    <img src="${t.avatar}">\n    <div>\n      <h4 class="dccn-text-2-light">\n        ${t.firstName} ${t.lastName}\n      </h4>\n      <p class="dccn-text-small text-muted">\n        ${t.affiliation}\n      </p>\n    </div>\n  </div>`);e.length>0?(m(l),l.html(e),l.find(".dccn-authors-search-item").click(a=>{const e=a.currentTarget;g({id:t(e).attr("data-user--id"),firstName:t(e).attr("data-user--first-name"),lastName:t(e).attr("data-user--last-name"),affiliation:t(e).attr("data-user--affiliation"),avatar:t(e).attr("data-user--avatar")})})):m(c)})};n.click(h),o.click(h),r.on("input",v),r.on("propertychange",v)},t.fn.authorsEditor=function(a){const e=this.find(".dccn-authors-editor-list"),i=this.find('.dccn-hidden-form input[type="hidden"]');i.change(function(){console.log(t(this).val())});const n=()=>{const a=this.find(".dccn-authors-editor-author"),e=t.map(a,a=>t(a).attr("data-id"));i.val(String(e)),i.trigger("change")};e.sortable({revert:!0,stop:n,create:n})},t(".dccn-authors-editor").authorsEditor(),t(".dccn-authors-search").authorSearch()}(jQuery),function(t){t.fn.dccnAvatar=function(a,e){var i=this.find(".dccn-upload-wrap"),n=this.find(".dccn-upload-msg"),o=i.find(".dccn-upload-frame"),r=this.find(".dccn-file-input input"),s=this.find(".dccn-upload-control"),c=t.extend({extSize:300,intSize:250,fn:function(t){swal({title:"",content:{element:"img",attributes:{src:t}},allowOutsideClick:!0})}},e);return a&&"attach"!==a?"detach"===a&&(i.removeClass("ready"),n.removeClass("hidden"),o.croppie("destroy"),s.off("click"),r.val("")):function(t,a){var e=s.filter(".dccn-upload-control-result"),c=s.filter(".dccn-upload-control-rotate-left"),l=s.filter(".dccn-upload-control-rotate-right");o.croppie({viewport:{width:a.intSize,height:a.intSize,type:"circle"},boundary:{width:a.extSize,height:a.extSize},enableOrientation:!0}),r.on("change",function(){!function(t){if(t.files&&t.files[0]){var a=new FileReader;a.onload=function(t){i.hasClass("ready")||i.addClass("ready"),n.hasClass("hidden")||n.addClass("hidden"),o.croppie("bind",{url:t.target.result}).then(function(){console.log("jQuery bind complete")})},a.readAsDataURL(t.files[0])}else console.log("Sorry - you're browser doesn't support the FileReader API")}(this)}),e.on("click",function(t){o.croppie("result",{type:"canvas",size:"viewport"}).then(a.fn)}),c.on("click",function(){o.croppie("rotate",90)}),l.on("click",function(){o.croppie("rotate",-90)})}(0,c),this}}(jQuery),function(t){var a=t(".dccn-scores-bar-chart");const e=["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)"],i=["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)"],n=["Technical Merit","Clarity","Relevance","Originality"];a.each((a,o)=>{const r=t(o).attr("data-scores").split(";").map(t=>t.split(",").map(t=>parseInt(t))),s=r.length,c=n.length;let l=s>0&&s<=3;if(r.forEach(t=>{l=l&&t.length==c,t.forEach(t=>{l=l&&!isNaN(t)})}),l){console.log(r);const t=math.divide(math.add(...r),s),a=[];r.forEach((t,n)=>{a.push({label:`Review #${n+1}`,data:t,backgroundColor:e[n],borderColor:i[n],borderWidth:1})}),a.push({label:"Average",data:t,backgroundColor:e[s],borderColor:i[s],type:"line",fill:!1}),new Chart(o,{type:"bar",data:{labels:n,datasets:a},options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})}})}(jQuery),jQuery('[data-toggle="tooltip"]').tooltip(),function(t){t(".dccn-custom-file input.custom-file-input").change(function(){var a=t(this)[0].files[0].name;t(this).next(".custom-file-label").text(a)})}(jQuery);